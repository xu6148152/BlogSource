---
title: Java并发实战
tags: Concurrency
---

### 并发基础

竞态状态，原子性
内置锁``synchronized``
重入(复写父类的锁方法)

volatile保证可见性，无法保证原子性

使用条件：

* 对变量的写入操作不依赖变量的当前值，或者能确保只有单线程更新变量的值
* 该变量不会与其他状态变量一起纳入不变性条件
* 在访问变量时不需要加锁



安全发布对象:

* 在静态初始化函数中初始化对象引用
* 将对象的引用保存到``volatile``类型的域或者``AtomicReference``对象中
* 将对象的引用保存到某个正确构造对象的``final``类型域中
* 将对象的引用保存到一个由锁保护的域中

线程安全库: Concurrent包下

并发程序策略:

* 线程封闭
* 只读共享
* 线程安全共享
* 保护对象

### 设计线程安全的类

* 找出构成对象状态的所有变量
* 找出约束状态变量的不变性条件
* 建立对象状态的并发访问管理策略